# 리액트 공식문서 스터디 3주차

## State 관리하기

1. state를 사용해 input 관리하기
- 리액트는 선언적 방식으로 UI조작, 사용자의 입력에 따라 state를 변경한다.
- 컴포넌트의 다양한 시각적 state 확인하기
    - 모형을 만들며 로직을 연결하기 전에 UI에서 테스트 가능
- 무엇이 state 변화를 유도하는지 알아내기
    - 휴먼 인풋 - 버튼 푸쉬, 필드 입력, 링크 이동
    - 컴퓨터 인풋 - 네트워크 응답, 타임아웃, 이미지 로딩
    - **UI를 업데이트 하기 위해서는 state 변수를 설정해야한다.**
    - 휴먼 인풋은 이벤트 핸들러가 필요할 수도 있다!
- 메모리의 state를 `usestate`로 표현하기
    - state는 움직이는 조각과 같아서 적을수록 좋다
- 불필요한 state 변수 제거하기
    - 리팩토링: 결과의 변경 없이 코드의 구조를 재조정하는 것
    - 리팩토링의 효과: 코드의 간결성을 높이고 불필요한 중복을 삭제한다
- state설정을 위해 이벤트 핸들러 연결하기
    - 모든 인터랙션을 state로 표현하면 이후 시각적 state가 추가되어도 기존 로직 손상을 방지한다
1. state 구조 선택하기
- `state 구조화 원칙: 오류없이 상태를 쉽게 업데이트하기`
    - 연관된 state 그룹화하기 - 단일 state 변수로 병합 고려하기
    - state의 모순 피하기 - 여러개의 state가 모순되는 방식으로 구성되면 실수 발생 여지 있음
    - 불필요한 state 피하기 - 계산이 있는 props나 state 변수는 state에 넣으면 안된다
    - state의 중복 피하기 - 동일 데이터가 중복될 경우 동기화 유지 어려움
    - 깊게 중첩된 state 피하기 - 업데이트하기 어려움
        - 평탄하게 만드는 것 (정규화) 고려하기
        - 예를 들어 자식 배열을 가지는 트리 구조 대신 자식 id의 배열을 가지도록..
1. 컨포넌트 간 state 공유하기
- state 끌어올리기
    1. 자신 컴포넌트의 state 제거
    2. 하드 코딩 값을 공통의 부모로부터 전달
    3. 공통의 부모에 state 추가, 이벤트 핸들러와 함께 전달
- 제어 컴포넌트와 비제어 컴포넌트
1. state를 보존하고 초기화하기
- state는 렌더 트리의 위치에 연결된다
- react는 컴포넌트가 UI트리에서 렌더링되는 한 state유지
- 같은 위치의 같은 컴포넌트는 state 보존
- 같은 위치의 다른 컴포넌트는 그의 전체 서브 트리 state 초기화
- 컴포넌트에 다른 key를 주면 하위트리를 초기화하도록 강제할 수 있음
1. state 로직을 reducer로 작성하기
- `useState` → `useReducer` 변환하기
    - 이벤트 핸들러에서 action 전달
    - 다음 state 반환하는 reducer 함수 작성
    - `useState`를 `useReducer`로 바꾸기
- reducer 함수 안에서는 switch문을 사용하는 것이 규칙, 각 case는 return으로 끝낼 것
- reducer는 디버깅과 테스트에 도움이 되고 반드시 순수해야 한다
- 각 action은 데이터 안에서 단일 사용자 상호작용을 설명해야 한다
- reducer를 더 간결하게 작성하려면 lmmer 라이브러리 사용할 것
1. context를 사용해 데이터를 깊게 전달하기 
- context를 사용하면 명시적으로 props를 전달해주지 않아도 컴포넌트가 트리 아래에 위치한 데이터를 사용할 수 있게 된다
- context의 사용법
    - context 생성
    - 데이터가 필요한 컴포넌트에서 context 사용
    - 데이터 지정 컴포넌트에서 context 제공
- 사용하기 전 고려할 것들(먼저 해보기)
    - props로 전달하기로 시작하기
    - 컴포넌트를 추출하고 JSX를 자식으로 전달하기
- context 사용예시
    - 테마 지정하기
    - 상태 관리
- context는 정적인 값으로 제한되지 X
1. reducer와 context로 앱 확장하기
- reducer를 사용하면 컴포넌트의 state 로직을 통합할 수 있음
- reducer와 context를 결합하는 방법
    - context 생성
    - state와 dispatch 함수를 context에 넣기
    - 트리 안에서 context 사용
- 하나의 파일로 합쳐 컴포넌트 정리 가능
